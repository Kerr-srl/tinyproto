<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Tiny protocol: Tiny protocol API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tiny protocol
   &#160;<span id="projectnumber">0.3</span>
   </div>
   <div id="projectbrief">Tiny communication protocol for microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tiny protocol API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is Tiny protocol implementation for microcontrollers (Arduino, Stellaris).</p>
<h1>Tiny Protocol</h1>
<h2>Introduction</h2>
<p>This protocol is intended to be used in low-memory systems, like microcontrollers (Stellaris, Arduino). It is also can be compiled for desktop Linux systems, and it is possible to build it for Windows.</p>
<h2>Tiny Protocol API.</h2>
<p>Linux API supports C-Style functions, while Arduino API supports both C-Style and C++ classes. Usage C++ Arduino classes makes easy use of the protocol for Arduino projects. Please refer to documentation.</p>
<h2>Tiny Protocol Packet structure.</h2>
<p>Full packet format: </p><pre>
   8    16     any len     8/16/32  8
 | 7E | UID |  USER DATA  |  FCS  | 7E |
</pre><ul>
<li>7E is standard packet delimiter (commonly used on layer 2) as defined in HDLC/PPP framing.</li>
<li>UID can be used for your own needs. This field is intented for use with higher levels protocols. This field is optional, you may omit UID parameter in Tiny Protocol API functions.</li>
<li>USER DATA of any length</li>
<li>FCS is standard checksum. Depending on your selection, this is 8-bit, 16-bit or 32-bit field. Refer to RFC1662 for examples. FCS field is also optional and can be disabled. But in this case transport errors are not detected.</li>
</ul>
<p>Each packet can be sent with simple api command: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__SIMPLE__API.html#ga988a41addbe75dc15cc13006de6740e0">tiny_send</a>(SHdlcData *handle, uint16_t *uid, uint8_t *pbuf, <span class="keywordtype">int</span> len, uint32_t flags)</div>
</div><!-- fragment --><p>And be received via another simple api command:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__SIMPLE__API.html#ga470d59a60a496944e63031ba43a00e3d">tiny_read</a>(SHdlcData *handle, uint16_t *uid, uint8_t *pbuf, <span class="keywordtype">int</span> len, uint32_t flags);</div>
</div><!-- fragment --><p>uid parameter is optional and can be be simply NULL. And FCS field can be disabled by calling </p><div class="fragment"><div class="line"><a class="code" href="group__ADVANCED__API.html#ga5e66725a2818491d4e2b1134951d9229">tiny_set_fcs_bits</a>(&amp;handle, 0);</div>
</div><!-- fragment --><p> In this case, UID field and FCS field are not used, and the protocol packet looks as follows: 8 any len 8 | 7E | USER DATA | 7E |</p>
<p>So, the protocol itself adds a little overhead to the user data: 2 bytes of packet delimiter in the simplest case. And in the case of full packet format (both with UID and 32-bit FCS fields) the protocol adds 8 bytes of overhead. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
